SEPD族库平台插件说明


	1.平台基于REVIT-addinmanager，使用C#开发，开发人员周昊天，徐经纬，吕嘉文。

	2.族库权限说明：
		1）插件按钮仅在SEPD用户认证通过时显示
		2）如用户需使用族上传功能，SEPD插件认证的用户名需在族库用户中有备案，如无法使用，请联系科信部 

	3.族上传规则
		上传操作为：制定族专业和类型、模型位置、表位置、填写各个基本参数、上传
		1）族上传前，需在树状图中选择族所属的专业和类型（树状图项目双击）
		2）上传时需先选择模型位置，后选择属性表位置（模型rfa文件，属性表xls文件）
		3）基本参数，电压等级、型号、生产厂家、族名称、来源部分条目会根据属性表自动检测，但都不能为空或者"NA"
		4）参数列表中可对xls修改改变属性表，确认修改后会直接修改本地xls文件
		5）点击上传按钮
		注：若族中属性条目和值均已整合进入模型，则属性表上传空表“预制族表”，基本参数不会进行检测需手动填写
		族命名各项参考（顺序不强制，但各项信息必须完备）： 主变压器-220kV-三相三绕组-西门子-初设可研阶段
		注2：批量上传工具，目前仅限超级管理使用，权限限制和要求较高，暂时不对任何用户开放。


	4.族下载规则
		下载操作为：树状图选择模型类型，上方根据名称电压等级厂家型号等信息查找，
		结果列于左方列表，从中挑选所需族加入右方列表待进一步操作，
		查看所选族参数（目前无法常看已整合模型属性），
		“下载”为下载模型和表到本地路径，“仅下载族”为仅将rfa载入当前rvt工程文件
		“载入并附参数条目”将rfa和xls中的条目合并（不对条目赋值），然后载入当前rvt工程文件
		“载入并附参数条目及参数值”将rfa和xls中的条目与值（对条目赋值）然后载入当前rvt工程文件（此步骤耗时较长）
		



//-----------------------------------------------------------------


开发路线

	族库整体设计方案：

		一、环境：
			客户端REVIT
			服务端 SQL SERVER  ，FTP 文件服务

		二、基本架构
			使用SQL记录族信息，利用FTP在中心服务器上存储族文件和信息表（表可选）
			本地提供增删改查功能，并操作FTP。
			提供各种表转换和族表合并工具。

		三、主要sql表
			
			1.族库信息主表
				CREATE TABLE table_e_Famliy
				(
					f_Uid INT NOT NULL PRIMARY KEY,
					f_Name varchar(128) NOT NULL,
					f_Path varchar(256) NOT NULL,
					f_Pic varchar(128),
					f_Value varchar(16) NOT NULL,
					f_Pro varchar(16),
					f_ValLevel varchar(16),
					f_Cat varchar(16),
					f_Hash varchar(16) NOT NULL,
					f_UploadDate varchar(16) NOT NULL,
					f_ConfigParaLocation varchar(16) NOT NULL,
					f_manufacturer varchar(16),
					f_Source varchar(16),
					f_DeviceType varchar(16),
					f_Standard varchar(16)
				);


				f_Uid		主键当前表唯一标识
				f_Name		族名
				f_Path 		族文件服务端位置
				f_Pic 		缩略图服务端位置
				f_Value		容量大小
				f_Pro 		专业
				f_ValLevel	电压等级
				f_Cat 		类型
				f_Hash		哈希 MD5  文件指纹
				f_UploadDate更新日期
				f_ConfigParaLocation	信息属性表文件服务端位置
				f_manufacturer		厂家
				f_Source	来源
				f_DeviceType型号
				f_Standard	依据标准


 			四、工具及功能
 				主要提供，上传，下载，删除，修改，批量上传，属性剥离，批量族表合并

 				1.	上传：读取文件，产生缩略图，产生属性表，上传自定义属性表（可选），选择专业及类型，填写型号，厂家，来源，
 					进入FTP上传，并由SQL记录所有信息

 				2. 	下载：从树状图中获取该类型族的列表，搜索寻找该族，查看属性表，可自定义属性表（可选），四种族文件的使用选项，
 					仅仅下载族文件到本地，下载族文件并自动载入当前工程，下载族文件和表文件载入当前工程且合并属性条目，
 					下载族文件和表文件载入当前工程且合并属性条目和值。

 				3. 	删除：选取族条目，并删除该SQL记录，此时FTP保存有记录

 				4. 	修改：修改族库中的保存信息，并更新sql记录

 				5.	批量上传：同上传

 				6.	属性剥离：利用REVIT平台，对族文件批量产生属性表文件

 				7.	批量族表合并：将外部表文件，依据需要，自动化添加进入RVT工程界面中的设备。










